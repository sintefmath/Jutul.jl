<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Usage · Jutul.jl</title><meta name="title" content="Usage · Jutul.jl"/><meta property="og:title" content="Usage · Jutul.jl"/><meta property="twitter:title" content="Usage · Jutul.jl"/><meta name="description" content="Documentation for Jutul.jl."/><meta property="og:description" content="Documentation for Jutul.jl."/><meta property="twitter:description" content="Documentation for Jutul.jl."/><meta property="og:url" content="https://sintefmath.github.io/Jutul.jl/usage/"/><meta property="twitter:url" content="https://sintefmath.github.io/Jutul.jl/usage/"/><link rel="canonical" href="https://sintefmath.github.io/Jutul.jl/usage/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Jutul.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Usage</a><ul class="internal"><li><a class="tocitem" href="#Setting-up-models"><span>Setting up models</span></a></li><li><a class="tocitem" href="#Systems-and-domains"><span>Systems and domains</span></a></li><li><a class="tocitem" href="#Set-up-of-system"><span>Set up of system</span></a></li><li><a class="tocitem" href="#Simulator-interfaces"><span>Simulator interfaces</span></a></li><li><a class="tocitem" href="#Linear-solvers"><span>Linear solvers</span></a></li><li><a class="tocitem" href="#Execution-contexts"><span>Execution contexts</span></a></li></ul></li><li><a class="tocitem" href="../optimization/">Sensitivities, adjoints and optimization</a></li><li><a class="tocitem" href="../mesh/">Meshes and mesh utilities</a></li><li><a class="tocitem" href="../units/">Units</a></li><li><a class="tocitem" href="../internals/">Internals</a></li><li><a class="tocitem" href="../docstrings/">Docstrings</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Usage</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Usage</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/sintefmath/Jutul.jl/blob/main/docs/src/usage.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="High-level-docstrings"><a class="docs-heading-anchor" href="#High-level-docstrings">High-level docstrings</a><a id="High-level-docstrings-1"></a><a class="docs-heading-anchor-permalink" href="#High-level-docstrings" title="Permalink"></a></h1><p>This section lists the main interfaces for interacting with codes that use Jutul as their foundation.</p><h2 id="Setting-up-models"><a class="docs-heading-anchor" href="#Setting-up-models">Setting up models</a><a id="Setting-up-models-1"></a><a class="docs-heading-anchor-permalink" href="#Setting-up-models" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="Jutul.SimulationModel"><a class="docstring-binding" href="#Jutul.SimulationModel"><code>Jutul.SimulationModel</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">SimulationModel(domain, system; &lt;kwarg&gt;)</code></pre><p>Instantiate a model for a given <code>system</code> discretized on the <code>domain</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/core_types/core_types.jl#L259-L263">source</a></section><section><div><pre><code class="language-julia hljs">SimulationModel(g::JutulMesh, system; discretization = nothing, kwarg...)</code></pre><p>Type that defines a simulation model - everything needed to solve the discrete equations.</p><p>The minimal setup requires a <a href="../mesh/#Jutul.JutulMesh"><code>JutulMesh</code></a> that defines topology together with a <a href="#Jutul.JutulSystem"><code>JutulSystem</code></a> that imposes physical laws.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/core_types/core_types.jl#L514-L522">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.MultiModel"><a class="docstring-binding" href="#Jutul.MultiModel"><code>Jutul.MultiModel</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">MultiModel(models)
MultiModel(models, :SomeLabel)</code></pre><p>A model variant that is made up of many named submodels, each a fully realized <a href="#Jutul.SimulationModel"><code>SimulationModel</code></a>.</p><p><code>models</code> should be a <code>NamedTuple</code> or <code>Dict{Symbol, JutulModel}</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/core_types/core_types.jl#L1039-L1046">source</a></section></details></article><h3 id="Model-API"><a class="docs-heading-anchor" href="#Model-API">Model API</a><a id="Model-API-1"></a><a class="docs-heading-anchor-permalink" href="#Model-API" title="Permalink"></a></h3><h4 id="Getters"><a class="docs-heading-anchor" href="#Getters">Getters</a><a id="Getters-1"></a><a class="docs-heading-anchor-permalink" href="#Getters" title="Permalink"></a></h4><article><details class="docstring" open="true"><summary id="Jutul.get_secondary_variables"><a class="docstring-binding" href="#Jutul.get_secondary_variables"><code>Jutul.get_secondary_variables</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">get_secondary_variables(model::SimulationModel)</code></pre><p>Get the secondary variable definitions (as <code>OrderedDict</code>) for a given <code>model</code>.</p><p>Secondary variables are variables that can be computed from the primary variables together with the parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/models.jl#L16-L23">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.get_primary_variables"><a class="docstring-binding" href="#Jutul.get_primary_variables"><code>Jutul.get_primary_variables</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">get_primary_variables(model::SimulationModel)</code></pre><p>Get the primary variable definitions (as <code>OrderedDict</code>) for a given <code>model</code>.</p><p>Primary variables are sometimes referred to as solution variables or primary unknowns. The set of primary variables completely determines the state of the system together with the <code>parameters</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/models.jl#L3-L11">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.get_parameters"><a class="docstring-binding" href="#Jutul.get_parameters"><code>Jutul.get_parameters</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">get_parameters(model::SimulationModel)</code></pre><p>Get the parameter definitions (as <code>OrderedDict</code>) for a given <code>model</code>.</p><p>Parameters are defined as static values in a forward simulation that combine with the primary variables to compute secondary variables and model equations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/models.jl#L51-L58">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.get_variables"><a class="docstring-binding" href="#Jutul.get_variables"><code>Jutul.get_variables</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">get_variables(model::SimulationModel)</code></pre><p>Get all variable definitions (as <code>OrderedDict</code>) for a given <code>model</code>.</p><p>This is the union of <a href="#Jutul.get_secondary_variables"><code>get_secondary_variables</code></a> and <a href="#Jutul.get_primary_variables"><code>get_primary_variables</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/models.jl#L29-L35">source</a></section></details></article><p>Setters</p><article><details class="docstring" open="true"><summary id="Jutul.set_secondary_variables!"><a class="docstring-binding" href="#Jutul.set_secondary_variables!"><code>Jutul.set_secondary_variables!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">set_secondary_variables!(model, varname = vardef)
set_secondary_variables!(model, varname1 = vardef1, varname2 = vardef2)</code></pre><p>Set a secondary variable with name <code>varname</code> to the definition <code>vardef</code> (adding if it does not exist)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/models.jl#L116-L122">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.set_primary_variables!"><a class="docstring-binding" href="#Jutul.set_primary_variables!"><code>Jutul.set_primary_variables!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">set_primary_variables!(model, varname = vardef)
set_primary_variables!(model, varname1 = vardef1, varname2 = vardef2)</code></pre><p>Set a primary variable with name <code>varname</code> to the definition <code>vardef</code> (adding if it does not exist)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/models.jl#L105-L110">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.set_parameters!"><a class="docstring-binding" href="#Jutul.set_parameters!"><code>Jutul.set_parameters!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">set_parameters!(model, parname = pardef)</code></pre><p>Set a parameter with name <code>varname</code> to the definition <code>vardef</code> (adding if it does not exist)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/models.jl#L128-L132">source</a></section></details></article><p>Various</p><article><details class="docstring" open="true"><summary id="Jutul.number_of_degrees_of_freedom"><a class="docstring-binding" href="#Jutul.number_of_degrees_of_freedom"><code>Jutul.number_of_degrees_of_freedom</code></a> — <span class="docstring-category">Function</span></summary><section><div><p>Total number of degrees of freedom for a model, over all primary variables and all entities.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/variables/utils.jl#L14-L16">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.number_of_values"><a class="docstring-binding" href="#Jutul.number_of_values"><code>Jutul.number_of_values</code></a> — <span class="docstring-category">Function</span></summary><section><div><p>Total number of values for a model, for a given type of variables over all entities</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/variables/utils.jl#L34-L36">source</a></section></details></article><h2 id="Systems-and-domains"><a class="docs-heading-anchor" href="#Systems-and-domains">Systems and domains</a><a id="Systems-and-domains-1"></a><a class="docs-heading-anchor-permalink" href="#Systems-and-domains" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="Jutul.JutulSystem"><a class="docstring-binding" href="#Jutul.JutulSystem"><code>Jutul.JutulSystem</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>Abstract type for the physical system to be solved.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/core_types/core_types.jl#L16-L18">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.JutulContext"><a class="docstring-binding" href="#Jutul.JutulContext"><code>Jutul.JutulContext</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>Abstract type for the context Jutul should execute in (matrix formats, memory allocation, etc.)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/core_types/core_types.jl#L83-L85">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.JutulDomain"><a class="docstring-binding" href="#Jutul.JutulDomain"><code>Jutul.JutulDomain</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>Abstract type for domains where equations can be defined</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/core_types/domains.jl#L1-L3">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.DataDomain"><a class="docstring-binding" href="#Jutul.DataDomain"><code>Jutul.DataDomain</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">DataDomain(domain::JutulDomain; property1 = p1, property2 = p2, ...)</code></pre><p>A wrapper around a domain that allows for storing of entity-associated data.</p><p>Example:</p><pre><code class="language-julia hljs"># Grid with 6 cells and 7 interior faces
g = CartesianMesh((2, 3))
d = DataDomain(g)
d[:cell_vec] = rand(6) #ok, same as:
d[:cell_vec, Cells()] = rand(6) #ok
d[:cell_vec, Faces()] = rand(6) #not ok!
d[:face_vec, Faces()] = rand(7) #ok!
# Can also add general arrays if last dimension == entity dimension
d[:cell_vec, Cells()] = rand(10, 3, 6) #ok
# Can add general data too, but needs to be specified
d[:not_on_face_or_cell, nothing] = rand(3) # also ok</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/core_types/domains.jl#L119-L138">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.DiscretizedDomain"><a class="docstring-binding" href="#Jutul.DiscretizedDomain"><code>Jutul.DiscretizedDomain</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">DiscretizedDomain(domain, disc = nothing)</code></pre><p>A type for a discretized domain of some other domain or mesh. May contain one or more discretizations as-needed to write equations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/core_types/domains.jl#L40-L45">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.JutulDiscretization"><a class="docstring-binding" href="#Jutul.JutulDiscretization"><code>Jutul.JutulDiscretization</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>Abstract type for a Jutul discretization</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/core_types/core_types.jl#L21-L23">source</a></section></details></article><h2 id="Set-up-of-system"><a class="docs-heading-anchor" href="#Set-up-of-system">Set up of system</a><a id="Set-up-of-system-1"></a><a class="docs-heading-anchor-permalink" href="#Set-up-of-system" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="Jutul.setup_state"><a class="docstring-binding" href="#Jutul.setup_state"><code>Jutul.setup_state</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">setup_state(model::JutulModel, name1 = value1, name2 = value2)</code></pre><p>Set up a state for a given model with values for the primary variables defined in the model. Normally all primary variables must be initialized in this way.</p><p><strong>Arguments</strong></p><ul><li><code>name=value</code>: The name of the primary variable together with the value(s) used to initialize the primary variable.</li></ul><p>A scalar (or short vector of the right size for <a href="../internals/#Jutul.VectorVariables"><code>VectorVariables</code></a>) will be repeated over the entire domain, while a vector (or matrix for <a href="../internals/#Jutul.VectorVariables"><code>VectorVariables</code></a>) with length (number of columns for <a href="../internals/#Jutul.VectorVariables"><code>VectorVariables</code></a>) equal to the entity count (for example, number of cells for a cell variable) will be used directly.</p><p>Note: You likely want to overload [<code>setup_state!</code>]@ref for a custom model instead of <code>setup_state</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/models.jl#L235-L248">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.setup_parameters"><a class="docstring-binding" href="#Jutul.setup_parameters"><code>Jutul.setup_parameters</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">setup_parameters(model::JutulModel; name = value)</code></pre><p>Set up a parameter storage for a given model with values for the parameter defined in the model.</p><p><strong>Arguments</strong></p><ul><li><code>name=value</code>: The name of the parameter together with the value(s) of the parameter.</li></ul><p>A scalar (or short vector of the right size for <a href="../internals/#Jutul.VectorVariables"><code>VectorVariables</code></a>) will be repeated over the entire domain, while a vector (or matrix for <a href="../internals/#Jutul.VectorVariables"><code>VectorVariables</code></a>) with length (number of columns for <a href="../internals/#Jutul.VectorVariables"><code>VectorVariables</code></a>) equal to the entity count (for example, number of cells for a cell variable) will be used directly.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/models.jl#L302-L312">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.setup_state_and_parameters"><a class="docstring-binding" href="#Jutul.setup_state_and_parameters"><code>Jutul.setup_state_and_parameters</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">state, prm = setup_state_and_parameters(model, init)</code></pre><p>Simultaneously set up state and parameters from a single <code>init</code> file (typically a <code>Dict</code> containing values that might either be initial values or parameters)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/models.jl#L336-L341">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.setup_forces"><a class="docstring-binding" href="#Jutul.setup_forces"><code>Jutul.setup_forces</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">setup_forces(model::JutulModel; force_name = force_value)</code></pre><p>Set up forces for a given model. Keyword arguments varies depending on what the model supports.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/models.jl#L892-L897">source</a></section></details></article><h2 id="Simulator-interfaces"><a class="docs-heading-anchor" href="#Simulator-interfaces">Simulator interfaces</a><a id="Simulator-interfaces-1"></a><a class="docs-heading-anchor-permalink" href="#Simulator-interfaces" title="Permalink"></a></h2><p>Used to run simulations once a model has been set up.</p><article><details class="docstring" open="true"><summary id="Jutul.simulate"><a class="docstring-binding" href="#Jutul.simulate"><code>Jutul.simulate</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">simulate(state0, model, timesteps, parameters = setup_parameters(model))
simulate(state0, model, timesteps, info_level = 3)
simulate(state0, model, timesteps; &lt;keyword arguments&gt;)</code></pre><p>Simulate a set of <code>timesteps</code> with <code>model</code> for the given initial <code>state0</code> and optionally specific parameters. Additional keyword arguments are passed onto <a href="#Jutul.simulator_config"><code>simulator_config</code></a> and <a href="#Jutul.simulate!"><code>simulate!</code></a>. This interface is primarily for convenience, as all storage for the simulator is allocated upon use and discared upon return. If you want to perform multiple simulations with the same model it is advised to instead instantiate <a href="#Jutul.Simulator"><code>Simulator</code></a>  and combine it with <a href="#Jutul.simulate!"><code>simulate!</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>state0::Dict</code>: initial state, typically created using <a href="#Jutul.setup_state"><code>setup_state</code></a> for the <code>model</code> in use.</li><li><code>model::JutulModel</code>: model that describes the discretized system to solve, for example <a href="#Jutul.SimulationModel"><code>SimulationModel</code></a> or <a href="#Jutul.MultiModel"><code>MultiModel</code></a>.</li><li><code>timesteps</code>: Vector of desired report steps. The simulator will perform time  integration until <code>sum(timesteps)</code>. You can also provide a single step in  place of a vector. is reached, providing outputs at the end of each report  step. If a <code>Inf</code> value is provided as any of the time-steps, the simulator  will either perform an infinite step (if no max_timestep is provided) or the  simulator will perform timestepping forever until the termination criterion  is met. If you pass <code>Inf</code> and no termination criterion is provided, the  simulator will error.</li><li><code>parameters=setup_parameters(model)</code>: Optional overrides the default parameters for the model.</li><li><code>forces=nothing</code>: Either <code>nothing</code> (for no forces), a single set of forces from <code>setup_forces(model)</code> or a <code>Vector</code> of such forces with equal length to <code>timesteps</code>.</li><li><code>restart=nothing</code>: If an integer is provided, the simulation will attempt to restart from that step. Requires that <code>output_path</code> is provided here or in the <code>config</code>.</li><li><code>config=simulator_config(model)</code>: Configuration object that holds many fine grained settings for output, linear solver, time-steps, outputs etc.</li></ul><p>Additional arguments are passed onto <a href="#Jutul.simulator_config"><code>simulator_config</code></a>.</p><p>See also <a href="#Jutul.simulate!"><code>simulate!</code></a>, <a href="#Jutul.Simulator"><code>Simulator</code></a>, <a href="#Jutul.SimulationModel"><code>SimulationModel</code></a>, <a href="#Jutul.simulator_config"><code>simulator_config</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/simulator/simulator.jl#L86-L123">source</a></section><section><div><pre><code class="language-julia hljs">simulate(state0, sim::JutulSimulator, timesteps; parameters = nothing, kwarg...)</code></pre><p>Simulate a set of <code>timesteps</code> with <code>simulator</code> for the given initial <code>state0</code> and optionally specific parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/simulator/simulator.jl#L138-L142">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.simulate!"><a class="docstring-binding" href="#Jutul.simulate!"><code>Jutul.simulate!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">simulate!(sim::JutulSimulator, timesteps;
    forces = nothing,
    config = nothing,
    initialize = true,
    restart = nothing,
    state0 = nothing,
    parameters = nothing,
    kwarg...
)</code></pre><p>Non-allocating (or perhaps less allocating) version of <a href="#Jutul.simulate!"><code>simulate!</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>initialize=true</code>: Perform internal updates as if this is the first time </li></ul><p>See also <a href="#Jutul.simulate"><code>simulate</code></a> for additional supported input arguments.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/simulator/simulator.jl#L149-L166">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.solve_timestep!"><a class="docstring-binding" href="#Jutul.solve_timestep!"><code>Jutul.solve_timestep!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">solve_timestep!(sim, dT, forces, max_its, config; &lt;keyword arguments&gt;)</code></pre><p>Internal function for solving a single time-step with fixed driving forces.</p><p><strong>Arguments</strong></p><ul><li><code>sim</code>: <code>Simulator</code> instance.</li><li><code>dT</code>: time-step to be solved</li><li><code>forces</code>: Driving forces for the time-step</li><li><code>max_its</code>: Maximum number of steps/Newton iterations.</li><li><code>config</code>: Configuration for solver (typically output from <code>simulator_config</code>).</li></ul><p>Note: This function is exported for fine-grained simulation workflows. The general <a href="#Jutul.simulate"><code>simulate</code></a> interface is both easier to use and performs additional validation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/simulator/simulator.jl#L280-L294">source</a></section></details></article><p>Configure a simulator:</p><article><details class="docstring" open="true"><summary id="Jutul.Simulator"><a class="docstring-binding" href="#Jutul.Simulator"><code>Jutul.Simulator</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">Simulator(model; &lt;kwarg&gt;)</code></pre><p>Set up a simulator object for a <code>model</code> that can be used by <a href="#Jutul.simulate!"><code>simulate!</code></a>. To avoid manually instantiating the simulator, the non-mutating <a href="#Jutul.simulate"><code>simulate</code></a> interface can be used instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/simulator/types.jl#L19-L25">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.simulator_config"><a class="docstring-binding" href="#Jutul.simulator_config"><code>Jutul.simulator_config</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">simulator_config(sim; info_level = 3, linear_solver = GenericKrylov())</code></pre><p>Set up a simulator configuration object that can be passed onto <a href="#Jutul.simulate!"><code>simulate!</code></a>.</p><p>There are many options available to configure a given simulator. The best way to get an overview of these possible configuration options is to instatiate the config without any arguments and inspecting the resulting table by calling <code>simulator_config(sim)</code> in the REPL.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/simulator/config.jl#L97-L107">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.JutulConfig"><a class="docstring-binding" href="#Jutul.JutulConfig"><code>Jutul.JutulConfig</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>JutulConfig(name = nothing)</p><p>A configuration object that acts like a <code>Dict{Symbol,Any}</code> but contains additional data to limit the valid keys and values to those added by <a href="#Jutul.add_option!"><code>add_option!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/simulator/types.jl#L104-L109">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.add_option!"><a class="docstring-binding" href="#Jutul.add_option!"><code>Jutul.add_option!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">add_option!(opts::JutulConfig, :my_cool_option, 3, &quot;My option has this brief description&quot;)</code></pre><p>Add an option to existing <a href="#Jutul.JutulConfig"><code>JutulConfig</code></a> structure. Additional currently undocumented keyword arguments can be used to restrict valid types and values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/config.jl#L3-L8">source</a></section></details></article><h2 id="Linear-solvers"><a class="docs-heading-anchor" href="#Linear-solvers">Linear solvers</a><a id="Linear-solvers-1"></a><a class="docs-heading-anchor-permalink" href="#Linear-solvers" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="Jutul.GenericKrylov"><a class="docstring-binding" href="#Jutul.GenericKrylov"><code>Jutul.GenericKrylov</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">GenericKrylov(solver = :gmres; preconditioner = nothing; &lt;kwarg&gt;)</code></pre><p>Solver that wraps <code>Krylov.jl</code> with support for preconditioning.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/linsolve/krylov.jl#L29-L33">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.LUSolver"><a class="docstring-binding" href="#Jutul.LUSolver"><code>Jutul.LUSolver</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">LUSolver(; reuse_memory = true, check = true, max_size = 50000)</code></pre><p>Direct solver that calls <code>lu</code> directly. Direct solvers are highly accurate, but are costly in terms of memory usage and execution speed for larger systems.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/linsolve/scalar_cpu.jl#L2-L7">source</a></section></details></article><h3 id="Preconditioners"><a class="docs-heading-anchor" href="#Preconditioners">Preconditioners</a><a id="Preconditioners-1"></a><a class="docs-heading-anchor-permalink" href="#Preconditioners" title="Permalink"></a></h3><article><details class="docstring" open="true"><summary id="Jutul.AMGPreconditioner"><a class="docstring-binding" href="#Jutul.AMGPreconditioner"><code>Jutul.AMGPreconditioner</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>AMG on CPU (Julia native)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/linsolve/precond/amg.jl#L2-L4">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.ILUZeroPreconditioner"><a class="docstring-binding" href="#Jutul.ILUZeroPreconditioner"><code>Jutul.ILUZeroPreconditioner</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>ILU(0) preconditioner on CPU</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/linsolve/precond/ilu.jl#L1-L3">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.JacobiPreconditioner"><a class="docstring-binding" href="#Jutul.JacobiPreconditioner"><code>Jutul.JacobiPreconditioner</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>Damped Jacobi preconditioner on CPU</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/linsolve/precond/jacobi.jl#L2-L4">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.SPAI0Preconditioner"><a class="docstring-binding" href="#Jutul.SPAI0Preconditioner"><code>Jutul.SPAI0Preconditioner</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>Sparse Approximate Inverse preconditioner of lowest order – SPAI(0)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/linsolve/precond/spai.jl#L1-L3">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.LUPreconditioner"><a class="docstring-binding" href="#Jutul.LUPreconditioner"><code>Jutul.LUPreconditioner</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>Full LU factorization as preconditioner (intended for smaller subsystems)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/linsolve/precond/various.jl#L8-L10">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.GroupWisePreconditioner"><a class="docstring-binding" href="#Jutul.GroupWisePreconditioner"><code>Jutul.GroupWisePreconditioner</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>Multi-model preconditioners</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/linsolve/precond/various.jl#L58-L60">source</a></section></details></article><h2 id="Execution-contexts"><a class="docs-heading-anchor" href="#Execution-contexts">Execution contexts</a><a id="Execution-contexts-1"></a><a class="docs-heading-anchor-permalink" href="#Execution-contexts" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="Jutul.DefaultContext"><a class="docstring-binding" href="#Jutul.DefaultContext"><code>Jutul.DefaultContext</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>Default context</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/core_types/contexts/default.jl#L2">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Jutul.ParallelCSRContext"><a class="docstring-binding" href="#Jutul.ParallelCSRContext"><code>Jutul.ParallelCSRContext</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>A context that uses a CSR sparse matrix format together with threads. Experimental.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/fd6f1826fe1e3fc42c6b7069a84cd1d3e03514c0/src/core_types/contexts/csr.jl#L2">source</a></section></details></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../optimization/">Sensitivities, adjoints and optimization »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Monday 2 February 2026 19:01">Monday 2 February 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
